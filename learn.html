<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Learn | Goldwire Games</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Cabin:wght@400;700&display=swap" rel="stylesheet">

<!-- D3 + Phylotree.js (CRITICAL) -->
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/phylotree@1.0.2/phylotree.min.js"></script>

<style>
/* ROOT THEME */
:root{
  --bg-color:#f7f3e9;
  --text-color:#2a2a2a;
  --accent-green:#4d7b48;
  --accent-orange:#d08a43;
  --accent-gold:#b8913b;
  --card-bg:#ffffff;

  /* Placeholder order colors â€” you can update these anytime */
  --color-carnivora:#d9534f;
  --color-primate:#f0ad4e;
  --color-artiodactyla:#5cb85c;
  --color-rodentia:#5bc0de;
}

body{
  margin:0;
  font-family:"Cabin", sans-serif;
  background:var(--bg-color);
  color:var(--text-color);
}

/* NAV */
nav{
  position:sticky; top:0;
  background:rgba(241,236,223,0.9);
  padding:12px;
  display:flex; gap:25px; justify-content:center;
  font-weight:700;
  border-bottom:1px solid rgba(0,0,0,0.1);
}
nav a{ color:var(--accent-gold); text-decoration:none; }
nav a:hover{ color:var(--accent-orange); }

/* MAIN LAYOUT */
.container{
  max-width:900px;
  margin:0 auto;
  padding:40px 20px;
}

section{
  background:#fff;
  padding:25px;
  margin:30px 0;
  border-radius:12px;
  box-shadow:0 4px 18px rgba(0,0,0,0.06);
}

/* TREE AREA */
#tree-container{
  width:100%;
  overflow-x:auto;
  border-radius:12px;
  border:1px solid rgba(0,0,0,0.15);
  padding:10px;
}

/* Legend */
.legend-box{
  font-size:0.9rem;
  margin-bottom:14px;
}
.legend-item{
  display:inline-flex;
  align-items:center;
  gap:6px;
  margin-right:18px;
}
.legend-color{
  width:14px; height:14px;
  border-radius:4px;
  border:1px solid #444;
}

</style>
</head>

<body>

<nav>
  <a href="index.html">Home</a>
  <a href="learn.html" style="color:var(--accent-orange)">Learn</a>
  <a href="about.html">About</a>
  <a href="shop.html">Shop</a>
  <a href="contact.html">Contact</a>
</nav>

<main class="container">

<header>
  <h1>Learn Mammal Mania</h1>
  <p>Explore the real mammal family tree behind the game.</p>
</header>

<section>
  <h2>Interactive Phylogenetic Tree</h2>
  <p>
    This tree shows how every species in <em>Mammal Mania</em> is related.
    It is built directly from the <strong>Open Tree of Life</strong> using your real species list.
  </p>

  <!-- Legend -->
  <div class="legend-box">
    <span class="legend-item">
      <span class="legend-color" style="background:var(--color-carnivora)"></span> Carnivora
    </span>
    <span class="legend-item">
      <span class="legend-color" style="background:var(--color-primate)"></span> Primates
    </span>
    <span class="legend-item">
      <span class="legend-color" style="background:var(--color-artiodactyla)"></span> Artiodactyla
    </span>
    <span class="legend-item">
      <span class="legend-color" style="background:var(--color-rodentia)"></span> Rodentia
    </span>
  </div>

  <!-- Where the tree will appear -->
  <div id="tree-container">
    <svg id="phyloTree"></svg>
  </div>
</section>

</main>

<script>
// --------------------------------------------------------------
// 1. Load NWK Tree from Your GitHub Repo
// --------------------------------------------------------------
const nwkURL = "https://tavisgoldwire.github.io/mammalmania_commonname.nwk";

// --------------------------------------------------------------
// 2. Load & Render Tree Using phylotree.js
// --------------------------------------------------------------
fetch(nwkURL)
  .then(response => response.text())
  .then(newickText => {

    const tree = new phylotree.phylotree(newickText)
      .svg(d3.select("#phyloTree"))
      .options({
        'left-right-spacing':'fit-to-size',
        'top-bottom-spacing':'fit-to-size'
      })
      .layout();

    // Color species by Order using name matching
    tree.style_nodes(node => {

      if(!node.data.name) return {};

      const nm = node.data.name.toLowerCase();

      if(nm.includes("wolf") ||
         nm.includes("tiger") ||
         nm.includes("lynx") ||
         nm.includes("badger") ||
         nm.includes("otter") ||
         nm.includes("bear") ||
         nm.includes("walrus") ||
         nm.includes("wolverine") ||
         nm.includes("ocelot") ||
         nm.includes("fox"))
        return { 'stroke': 'var(--color-carnivora)', 'stroke-width': 3 };

      if(nm.includes("lemur") ||
         nm.includes("tarsier") ||
         nm.includes("mandrill") ||
         nm.includes("macaque") ||
         nm.includes("gorilla") ||
         nm.includes("chimp") ||
         nm.includes("orang"))
        return { 'stroke': 'var(--color-primate)', 'stroke-width': 3 };

      if(nm.includes("sheep") ||
         nm.includes("ox") ||
         nm.includes("giraffe") ||
         nm.includes("hog") ||
         nm.includes("pig") ||
         nm.includes("babirusa") ||
         nm.includes("dolphin") ||
         nm.includes("orca") ||
         nm.includes("antelope") ||
         nm.includes("moose"))
        return { 'stroke': 'var(--color-artiodactyla)', 'stroke-width': 3 };

      if(nm.includes("capybara") ||
         nm.includes("guinea") ||
         nm.includes("mara") ||
         nm.includes("squirrel") ||
         nm.includes("porcupine") ||
         nm.includes("beaver") ||
         nm.includes("rat") ||
         nm.includes("mouse"))
        return { 'stroke': 'var(--color-rodentia)', 'stroke-width': 3 };

      return {};
    });

  })
  .catch(err => {
    document.getElementById("tree-container").innerHTML =
      "<p style='color:red;'>Failed to load tree. Check your NWK file URL.</p>";
    console.error(err);
  });

</script>

</body>
</html>





